<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" type="text/css" href="css/xcode.css">
    <title>JsSpim</title>
</head>
<body>

<div id="toolbar-group" class="group">
    <fieldset>
        <legend>File:</legend>
        <select id="file-selector" onchange="main(this.value)"></select>
        or
        <input id="file-upload" onChange="main(this.files[0])" type="file"/>
    </fieldset>

    <fieldset>
        <legend>Execution:</legend>
        Speed:
        <input type="range" id="speed-selector" value="200" max="200" oninput="Execution.setSpeed(this.value)">
        <button id="play-button">Run</button>
        <button id="step-button">Step</button>
        <button id="reset-button">Reset</button>
    </fieldset>

    <fieldset>
        <legend>Memory:</legend>

        <label>
            <input id="toggle-kernel-data" type="checkbox">
            kernel data
        </label>

        <label>
            <input id="toggle-kernel-text" type="checkbox">
            kernel text
        </label>

        <label>
            <input id="toggle-instruction-value" type="checkbox"
                   onchange="Display.toggleInstructionBinary(this.checked)">
            instruction value
        </label>

        <label>
            <input id="toggle-comment" type="checkbox" checked
                   onchange="Display.toggleInstructionComment(this.checked)">
            comment
        </label>
    </fieldset>

    <fieldset>
        <legend>Radix:</legend>

        <input type="radio" name="radix" id="radix-hex" checked>
        <label for="radix-hex">hex</label>

        <input type="radio" name="radix" id="radix-dec">
        <label for="radix-dec">dec</label>

        <input type="radio" name="radix" id="radix-bin">
        <label for="radix-bin">bin</label>
    </fieldset>

</div>

<div id="regs-panel" class="panel">
    <h1>Register</h1>
    <div class="content">
        <h4>Special</h4>
        <div id="special-regs" class="reg-lines"></div>
        <h4>General</h4>
        <div id="general-regs" class="reg-lines"></div>
        <h4>Single</h4>
        <div id="float-regs" class="reg-lines"></div>
        <h4>Double</h4>
        <div id="double-regs" class="reg-lines"></div>
    </div>

</div>

<div id="text-panel" class="panel">
    <h1>Text</h1>
    <div id="text-content" class="content"></div>
</div>

<div id="data-panel" class="panel">
    <h1>Data</h1>
    <div id="data-content" class="content"></div>
</div>

<div id="stack-panel" class="panel">
    <h1>Stack</h1>
    <div id="stack-content" class="content"></div>
</div>

<div id="footer">
    <div id="output-panel" class="panel">
        <h1>Output</h1>
        <pre id="output-content" class="content"></pre>
    </div>

    <div id="log-panel" class="panel">
        <h1>Log</h1>
        <pre id="log-content" class="content"></pre>
    </div>
</div>

<script type='text/javascript'>
    const Elements = Object.freeze({
        output: document.getElementById('output-content'),
        log: document.getElementById('log-content'),
        fileSelector: document.getElementById('file-selector'),
        playButton: document.getElementById('play-button'),
        resetButton: document.getElementById('reset-button'),
        stepButton: document.getElementById('step-button'),
        speedSelector: document.getElementById('speed-selector'),
        text: document.getElementById('text-content'),
        data: document.getElementById('data-content'),
        stack: document.getElementById('stack-content'),
        generalReg: document.getElementById('general-regs'),
        specialReg: document.getElementById('special-regs')
    });

    const fileList = ['fib.s', 'helloworld.s', 'tt.core.s', 'change_data_seg.s'];
    fileList.forEach(filename => {
        const option = document.createElement("option");
        option.text = filename;
        option.value = `Tests/${filename}`;
        Elements.fileSelector.add(option);
    });
</script>

<script type='text/javascript' src="js/index.js"></script>
<script type='text/javascript' src="js/display.js"></script>
<script type='text/javascript' src="js/execution.js"></script>
<script async type="text/javascript" src="wasm.js"></script>
</body>
</html>